<div class="my-movies-container">
  <p-tabView>
    <!-- Active Tickets Tab -->
    <p-tabPanel header="Active Tickets">
      <div class="grid grid-cols-12 gap-4">
        <div
          *ngFor="let ticket of upcomingMovies"
          class="col-span-12 md:col-span-6 lg:col-span-4"
        >
          <p-card [header]="ticket.movie_title" styleClass="h-full">
            <ng-template pTemplate="header">
              <img
                [src]="ticket.poster"
                alt="Movie Poster"
                class="w-full h-60 object-cover"
              />
            </ng-template>

            <div class="flex flex-col gap-4">
              <div class="flex items-center gap-2">
                <i class="pi pi-calendar"></i>
                <span>{{ ticket.showtime | date : "medium" }}</span>
              </div>

              <div class="flex items-center gap-2">
                <i class="pi pi-ticket"></i>
                <span>Seats: {{ ticket.seats.join(", ") }}</span>
              </div>

              <div class="flex items-center gap-2">
                <i class="pi pi-wallet"></i>
                <span>Total: ${{ ticket.total_amount }}</span>
              </div>

              <p-tag
                [value]="ticket.payment_status"
                [severity]="getStatusSeverity(ticket.payment_status)"
              >
              </p-tag>
            </div>

            <ng-template pTemplate="footer">
              <div class="flex justify-between">
                <p-button
                  label="View Details"
                  icon="pi pi-eye"
                  styleClass="p-button-outlined"
                >
                </p-button>
                <p-button
                  label="Cancel"
                  icon="pi pi-times"
                  severity="danger"
                  (onClick)="cancelTicket(ticket.id)"
                >
                </p-button>
              </div>
            </ng-template>
          </p-card>
        </div>
      </div>
    </p-tabPanel>

    <!-- Past Movies Tab -->
    <p-tabPanel header="Movie History">
      <div class="grid grid-cols-12 gap-4">
        <div *ngFor="let ticket of pastMovies" class="col-span-12 md:col-span-6 lg:col-span-4">
          <p-card [header]="ticket.movie_title" styleClass="h-full">
            <ng-template pTemplate="header">
              <img
                [src]="ticket.poster"
                alt="Movie Poster"
                class="w-full h-60 object-cover"
              />
            </ng-template>

            <div class="flex flex-col gap-4">
              <div class="flex items-center gap-2">
                <i class="pi pi-calendar"></i>
                <span>{{ ticket.showtime | date : "medium" }}</span>
              </div>

              <div class="flex items-center gap-2">
                <i class="pi pi-ticket"></i>
                <span>Seats: {{ ticket.seats.join(", ") }}</span>
              </div>

              <div class="flex items-center gap-2">
                <i class="pi pi-wallet"></i>
                <span>Total: ${{ ticket.total_amount }}</span>
              </div>
            </div>
          </p-card>
        </div>
      </div>
    </p-tabPanel>
  </p-tabView>
</div>
