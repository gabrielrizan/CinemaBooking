<p-toast></p-toast>
<p-overlayPanel #op>
  <ng-container *ngIf="isLoggedIn; else loginTemplate">
    <p-tieredMenu #menu [model]="loggedInItems"></p-tieredMenu>
  </ng-container>
  <ng-template #loginTemplate>
    <div class="card">
      <div class="flex flex-col md:flex-row">
        <div
          class="w-full md:w-5/12 flex flex-col items-center justify-center gap-4 py-8"
        >
          <div
            class="flex flex-wrap justify-center items-center gap-2"
          >
            <label class="w-24">Email</label>
            <input
              pInputText
              id="username"
              type="text"
              class="w-56"
              [(ngModel)]="username"
            />
          </div>
          <div
            class="flex flex-wrap justify-center items-center gap-2"
          >
            <label class="w-24">Password</label>
            <input
              pInputText
              id="password"
              type="password"
              class="w-56"
              [(ngModel)]="password"
            />
          </div>
          <p-button
            label="Login"
            icon="pi pi-user"
            styleClass="w-40 mx-auto"
            (click)="onLogin()"
          />
        </div>
        <div class="w-full md:w-2/12">
          <p-divider layout="vertical" styleClass="hidden md:flex"
            ><b>OR</b></p-divider
          >
          <p-divider
            layout="horizontal"
            styleClass="flex md:hidden"
            [align]="'center'"
            ><b>OR</b></p-divider
          >
        </div>
        <div
          class="w-full md:w-5/12 flex items-center justify-center py-8"
        >
          <p-button
            (click)="showSignUpForm()"
            label="Sign Up"
            icon="pi pi-user-plus"
            styleClass="p-button-success w-40"
          />
        </div>
      </div>
    </div>
  </ng-template>
</p-overlayPanel>

<p-dialog
  header="Sign up"
  [(visible)]="visible"
  [modal]="true"
  [closable]="true"
  [style]="{ width: '50vw' }"
>
  <app-signup (registered)="onSignupSuccess()"></app-signup>
</p-dialog>
